{"ast":null,"code":"var _jsxFileName = \"D:\\\\caro-client\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { io } from 'socket.io-client';\nimport GameBoard from './components/GameBoard';\nimport Lobby from './components/Lobby';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [gameState, setGameState] = useState(null);\n  const [playerInfo, setPlayerInfo] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [isSpectator, setIsSpectator] = useState(false);\n  const [roomId, setRoomId] = useState('');\n  useEffect(() => {\n    const newSocket = io('https://caro.ngabayquetoi.io.vn');\n    setSocket(newSocket);\n    newSocket.on('connect', () => {\n      console.log('Connected to server');\n      setIsConnected(true);\n    });\n    newSocket.on('disconnect', () => {\n      console.log('Disconnected from server');\n      setIsConnected(false);\n    });\n    newSocket.on('joined-as-player', data => {\n      setPlayerInfo(data);\n      setIsSpectator(false);\n    });\n    newSocket.on('joined-as-spectator', () => {\n      setIsSpectator(true);\n      setPlayerInfo(null);\n    });\n    newSocket.on('game-state', state => {\n      setGameState(state);\n    });\n    newSocket.on('move-made', data => {\n      setGameState(prev => prev ? {\n        ...prev,\n        board: data.board,\n        currentPlayer: data.currentPlayer,\n        gameStatus: data.gameStatus,\n        winner: data.winner\n      } : null);\n    });\n    newSocket.on('game-reset', data => {\n      setGameState(prev => prev ? {\n        ...prev,\n        board: data.board,\n        currentPlayer: data.currentPlayer,\n        gameStatus: data.gameStatus,\n        winner: data.winner\n      } : null);\n    });\n    newSocket.on('player-left', data => {\n      setGameState(prev => prev ? {\n        ...prev,\n        players: data.players\n      } : null);\n    });\n    return () => {\n      newSocket.close();\n    };\n  }, []);\n  const joinRoom = room => {\n    if (socket && room.trim()) {\n      socket.emit('join-room', room.trim());\n      setRoomId(room.trim());\n    }\n  };\n  const makeMove = (row, col) => {\n    if (socket && playerInfo && (gameState === null || gameState === void 0 ? void 0 : gameState.gameStatus) === 'playing') {\n      socket.emit('make-move', {\n        row,\n        col\n      });\n    }\n  };\n  const resetGame = () => {\n    if (socket) {\n      socket.emit('reset-game');\n    }\n  };\n  if (!isConnected) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Connecting to server...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this);\n  }\n  if (!gameState) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: /*#__PURE__*/_jsxDEV(Lobby, {\n        onJoinRoom: joinRoom\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: /*#__PURE__*/_jsxDEV(GameBoard, {\n      gameState: gameState,\n      playerInfo: playerInfo,\n      isSpectator: isSpectator,\n      onMakeMove: makeMove,\n      onResetGame: resetGame,\n      roomId: roomId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"x638b0P/JgLjLpFOUG9yL9e84q8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","io","GameBoard","Lobby","jsxDEV","_jsxDEV","App","_s","socket","setSocket","gameState","setGameState","playerInfo","setPlayerInfo","isConnected","setIsConnected","isSpectator","setIsSpectator","roomId","setRoomId","newSocket","on","console","log","data","state","prev","board","currentPlayer","gameStatus","winner","players","close","joinRoom","room","trim","emit","makeMove","row","col","resetGame","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onJoinRoom","onMakeMove","onResetGame","_c","$RefreshReg$"],"sources":["D:/caro-client/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { io, Socket } from 'socket.io-client';\r\nimport GameBoard from './components/GameBoard';\r\nimport Lobby from './components/Lobby';\r\nimport './App.css';\r\n\r\ninterface GameState {\r\n  board: (string | null)[][];\r\n  currentPlayer: string;\r\n  gameStatus: string;\r\n  winner: string | null;\r\n  players: Array<{ id: string; symbol: string }>;\r\n}\r\n\r\ninterface PlayerInfo {\r\n  symbol: string;\r\n  playerIndex: number;\r\n}\r\n\r\nconst App: React.FC = () => {\r\n  const [socket, setSocket] = useState<Socket | null>(null);\r\n  const [gameState, setGameState] = useState<GameState | null>(null);\r\n  const [playerInfo, setPlayerInfo] = useState<PlayerInfo | null>(null);\r\n  const [isConnected, setIsConnected] = useState<boolean>(false);\r\n  const [isSpectator, setIsSpectator] = useState<boolean>(false);\r\n  const [roomId, setRoomId] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n    const newSocket: Socket = io('https://caro.ngabayquetoi.io.vn');\r\n    setSocket(newSocket);\r\n\r\n    newSocket.on('connect', () => {\r\n      console.log('Connected to server');\r\n      setIsConnected(true);\r\n    });\r\n\r\n    newSocket.on('disconnect', () => {\r\n      console.log('Disconnected from server');\r\n      setIsConnected(false);\r\n    });\r\n\r\n    newSocket.on('joined-as-player', (data: PlayerInfo) => {\r\n      setPlayerInfo(data);\r\n      setIsSpectator(false);\r\n    });\r\n\r\n    newSocket.on('joined-as-spectator', () => {\r\n      setIsSpectator(true);\r\n      setPlayerInfo(null);\r\n    });\r\n\r\n    newSocket.on('game-state', (state: GameState) => {\r\n      setGameState(state);\r\n    });\r\n\r\n    newSocket.on('move-made', (data: { board: (string | null)[][], currentPlayer: string, gameStatus: string, winner: string | null }) => {\r\n      setGameState((prev: GameState | null) => prev ? {\r\n        ...prev,\r\n        board: data.board,\r\n        currentPlayer: data.currentPlayer,\r\n        gameStatus: data.gameStatus,\r\n        winner: data.winner\r\n      } : null);\r\n    });\r\n\r\n    newSocket.on('game-reset', (data: { board: (string | null)[][], currentPlayer: string, gameStatus: string, winner: string | null }) => {\r\n      setGameState((prev: GameState | null) => prev ? {\r\n        ...prev,\r\n        board: data.board,\r\n        currentPlayer: data.currentPlayer,\r\n        gameStatus: data.gameStatus,\r\n        winner: data.winner\r\n      } : null);\r\n    });\r\n\r\n    newSocket.on('player-left', (data: { players: Array<{ id: string; symbol: string }> }) => {\r\n      setGameState((prev: GameState | null) => prev ? {\r\n        ...prev,\r\n        players: data.players\r\n      } : null);\r\n    });\r\n\r\n    return () => {\r\n      newSocket.close();\r\n    };\r\n  }, []);\r\n\r\n  const joinRoom = (room: string) => {\r\n    if (socket && room.trim()) {\r\n      socket.emit('join-room', room.trim());\r\n      setRoomId(room.trim());\r\n    }\r\n  };\r\n\r\n  const makeMove = (row: number, col: number) => {\r\n    if (socket && playerInfo && gameState?.gameStatus === 'playing') {\r\n      socket.emit('make-move', { row, col });\r\n    }\r\n  };\r\n\r\n  const resetGame = () => {\r\n    if (socket) {\r\n      socket.emit('reset-game');\r\n    }\r\n  };\r\n\r\n  if (!isConnected) {\r\n    return (\r\n      <div className=\"app\">\r\n        <div className=\"loading\">\r\n          <h2>Connecting to server...</h2>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!gameState) {\r\n    return (\r\n      <div className=\"app\">\r\n        <Lobby onJoinRoom={joinRoom} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <GameBoard\r\n        gameState={gameState}\r\n        playerInfo={playerInfo}\r\n        isSpectator={isSpectator}\r\n        onMakeMove={makeMove}\r\n        onResetGame={resetGame}\r\n        roomId={roomId}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,EAAE,QAAgB,kBAAkB;AAC7C,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,KAAK,MAAM,oBAAoB;AACtC,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAenB,MAAMC,GAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAgB,IAAI,CAAC;EACzD,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAmB,IAAI,CAAC;EAClE,MAAM,CAACa,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAoB,IAAI,CAAC;EACrE,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAU,KAAK,CAAC;EAC9D,MAAM,CAACiB,WAAW,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAU,KAAK,CAAC;EAC9D,MAAM,CAACmB,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAAS,EAAE,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACd,MAAMoB,SAAiB,GAAGnB,EAAE,CAAC,iCAAiC,CAAC;IAC/DQ,SAAS,CAACW,SAAS,CAAC;IAEpBA,SAAS,CAACC,EAAE,CAAC,SAAS,EAAE,MAAM;MAC5BC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MAClCR,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC,CAAC;IAEFK,SAAS,CAACC,EAAE,CAAC,YAAY,EAAE,MAAM;MAC/BC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;MACvCR,cAAc,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC;IAEFK,SAAS,CAACC,EAAE,CAAC,kBAAkB,EAAGG,IAAgB,IAAK;MACrDX,aAAa,CAACW,IAAI,CAAC;MACnBP,cAAc,CAAC,KAAK,CAAC;IACvB,CAAC,CAAC;IAEFG,SAAS,CAACC,EAAE,CAAC,qBAAqB,EAAE,MAAM;MACxCJ,cAAc,CAAC,IAAI,CAAC;MACpBJ,aAAa,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC;IAEFO,SAAS,CAACC,EAAE,CAAC,YAAY,EAAGI,KAAgB,IAAK;MAC/Cd,YAAY,CAACc,KAAK,CAAC;IACrB,CAAC,CAAC;IAEFL,SAAS,CAACC,EAAE,CAAC,WAAW,EAAGG,IAAsG,IAAK;MACpIb,YAAY,CAAEe,IAAsB,IAAKA,IAAI,GAAG;QAC9C,GAAGA,IAAI;QACPC,KAAK,EAAEH,IAAI,CAACG,KAAK;QACjBC,aAAa,EAAEJ,IAAI,CAACI,aAAa;QACjCC,UAAU,EAAEL,IAAI,CAACK,UAAU;QAC3BC,MAAM,EAAEN,IAAI,CAACM;MACf,CAAC,GAAG,IAAI,CAAC;IACX,CAAC,CAAC;IAEFV,SAAS,CAACC,EAAE,CAAC,YAAY,EAAGG,IAAsG,IAAK;MACrIb,YAAY,CAAEe,IAAsB,IAAKA,IAAI,GAAG;QAC9C,GAAGA,IAAI;QACPC,KAAK,EAAEH,IAAI,CAACG,KAAK;QACjBC,aAAa,EAAEJ,IAAI,CAACI,aAAa;QACjCC,UAAU,EAAEL,IAAI,CAACK,UAAU;QAC3BC,MAAM,EAAEN,IAAI,CAACM;MACf,CAAC,GAAG,IAAI,CAAC;IACX,CAAC,CAAC;IAEFV,SAAS,CAACC,EAAE,CAAC,aAAa,EAAGG,IAAwD,IAAK;MACxFb,YAAY,CAAEe,IAAsB,IAAKA,IAAI,GAAG;QAC9C,GAAGA,IAAI;QACPK,OAAO,EAAEP,IAAI,CAACO;MAChB,CAAC,GAAG,IAAI,CAAC;IACX,CAAC,CAAC;IAEF,OAAO,MAAM;MACXX,SAAS,CAACY,KAAK,CAAC,CAAC;IACnB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,QAAQ,GAAIC,IAAY,IAAK;IACjC,IAAI1B,MAAM,IAAI0B,IAAI,CAACC,IAAI,CAAC,CAAC,EAAE;MACzB3B,MAAM,CAAC4B,IAAI,CAAC,WAAW,EAAEF,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;MACrChB,SAAS,CAACe,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;IACxB;EACF,CAAC;EAED,MAAME,QAAQ,GAAGA,CAACC,GAAW,EAAEC,GAAW,KAAK;IAC7C,IAAI/B,MAAM,IAAII,UAAU,IAAI,CAAAF,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEmB,UAAU,MAAK,SAAS,EAAE;MAC/DrB,MAAM,CAAC4B,IAAI,CAAC,WAAW,EAAE;QAAEE,GAAG;QAAEC;MAAI,CAAC,CAAC;IACxC;EACF,CAAC;EAED,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACtB,IAAIhC,MAAM,EAAE;MACVA,MAAM,CAAC4B,IAAI,CAAC,YAAY,CAAC;IAC3B;EACF,CAAC;EAED,IAAI,CAACtB,WAAW,EAAE;IAChB,oBACET,OAAA;MAAKoC,SAAS,EAAC,KAAK;MAAAC,QAAA,eAClBrC,OAAA;QAAKoC,SAAS,EAAC,SAAS;QAAAC,QAAA,eACtBrC,OAAA;UAAAqC,QAAA,EAAI;QAAuB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7B;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI,CAACpC,SAAS,EAAE;IACd,oBACEL,OAAA;MAAKoC,SAAS,EAAC,KAAK;MAAAC,QAAA,eAClBrC,OAAA,CAACF,KAAK;QAAC4C,UAAU,EAAEd;MAAS;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B,CAAC;EAEV;EAEA,oBACEzC,OAAA;IAAKoC,SAAS,EAAC,KAAK;IAAAC,QAAA,eAClBrC,OAAA,CAACH,SAAS;MACRQ,SAAS,EAAEA,SAAU;MACrBE,UAAU,EAAEA,UAAW;MACvBI,WAAW,EAAEA,WAAY;MACzBgC,UAAU,EAAEX,QAAS;MACrBY,WAAW,EAAET,SAAU;MACvBtB,MAAM,EAAEA;IAAO;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChB;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAACvC,EAAA,CArHID,GAAa;AAAA4C,EAAA,GAAb5C,GAAa;AAuHnB,eAAeA,GAAG;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}